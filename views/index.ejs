<%- include('./partials/header'); %>


    <style>
        .details {
            font-size: 0.9em !important
        }

        ;

        button {
            font-size: 0.9em !important
        }

        ;

        .actual {
            margin-top: 9px
        }

        ;

        #TodaysDate {
            font-weight: 900;
            font-size: 1.1em
        }

        strong {
            font-size: 1.3em
        }
    </style>

    <body>


        <div class="uk-container">

            <h1 class="uk-heading-small">YPL Tracker <img class="uk-align-right" src="/yuki.JPG" width="100px"></h1>

            <hr class="uk-divider-icon">

            <div class="uk-child-width-expand@s uk-text-center startPoint" uk-grid>

            </div>

            <hr class="uk-divider-icon">

            <div class="resultTable">

            </div>



        </div>
    </body>


    <!-- local script -->
    <script>

        var main = ""
        highlightFail = false

        var tdate = new Date(Date.now()).toLocaleString().split(',')[0]

        // setup from imported json
        var config = <%- JSON.stringify(data) %>

        data = config

        // setup cards
        var cardHTML = "<div>"
        cardHTML += '<div role="~name~" class="uk-card uk-card-default uk-card-body">~item~</div>'
        cardHTML += "</div>"

        class card {
            constructor(html, id) {
                this.html = html;
                this.id = id;
            }
        }

        config.init.forEach(function (element) {
            let newCard = new card(cardHTML.replace("~item~", element.id), element.id)
            newCard.html = newCard.html.replace("~name~", element.name)
            $(".startPoint").append(newCard.html)
            console.log(newCard.html)
        })

        $(".uk-card").click("on", function () {
            // UI
            $(".resultTable").html("")
            $(".uk-card").css("background-color","#f8f8f8")
            $(".uk-card").css("font-weight","400")
            $(this).css("background-color","#f3ebb1")
            $(this).css("font-weight","600")

            // DATA
            let name = $(this).attr("role")
            let index = config.init.findIndex(x => x.name === name);
            let details = "<div class='firstRow'>Recieved: $" + config.init[index].Paid + "</div>"
            details += "<div class='firstRow'>Visits: " + config[name].length + "</div>"
            details += "<div class='firstRow'>Visits Paid For: $" + config[name].length * config.Visit + "</div>"

            // RENDER
            $(".resultTable").append(details)
            config[name].forEach(function (element) {
                console.log(element)
                let row = "<div>" + element.date + "</div>"
                row += "<div>" + element.day + "</div>"
                row += "<div>" + "$" + config.Visit + "</div>"
                $(".resultTable").append(row)
            })

        })

    </script>




    <footer>
        <%- include('./partials/footer'); %>
    </footer>

    <style>
        .uk-card {
            cursor: pointer
        }

        .resultTable {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
        }

        .resultTable div {
            margin-top:10px;
            margin-bottom: 10px;
            border-bottom: 1px solid rgb(236, 233, 233)
        }

        .firstRow {
             margin-top:10px;
            margin-bottom: 30px;
            border-bottom: 0px solid white;
            font-weight:700
        }

        
           
    </style>

    </html>